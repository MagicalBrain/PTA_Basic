# 【PAT Basic】1051 复数乘法 (15 分)

## 题目描述

复数可以写成 $(A+Bi)$ 的常规形式，其中 $A$ 是实部，$B$ 是虚部，$i$ 是虚数单位，满足 $i^2​​ = −1$；也可以写成极坐标下的指数形式 
$$R \times e^{(P i)}$$
其中 R 是复数模，P 是辐角，i 是虚数单位，其等价于三角形式 
$$R(\cos(P) + i \sin(P))$$

现给定两个复数的 R 和 P，要求输出两数乘积的常规形式。

输入格式：
输入在一行中依次给出两个复数的 $R_1, P_1; R_2, P_2$​​ ，数字间以空格分隔。

输出格式：
在一行中按照 A+Bi 的格式输出两数乘积的常规形式，实部和虚部均保留 2 位小数。

注意：如果 B 是负数，则应该写成 A-|B|i 的形式。

输入样例：
```
2.3 3.5 5.2 0.4
```

输出样例：
```
-8.68-8.23i
```

## 基本思路

这纯粹是数学题，照着公式敲就行了。

复数乘法其实类似于多项式展开，只不过$i^2 = -1$

积：
$$(a_1 \times a_2 - b_1 \times b_2) + (b_1 \times a_2 + a_1 \times b_2) i$$

在极坐标下，复数可用模长$R$与幅角$\theta$表示为$(R,\theta)$。对于复数$a+bi$,$r=\sqrt{a^2+b^2}，\theta=\arctan(\frac{b}{a})$。此时，复数相乘表现为幅角$\theta$相加，模长$R$相乘。

而此题要求输入模长和幅角算出复数的积，关键在于模长和幅角怎么换算成复数的常规形式：$(A+Bi)$

有题目可知：
$$A = R \cos \theta, B = R \sin \theta$$

## 代码

```cpp
/*
* 1051题 代码存档
*/
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

int main() {
    double a1, b1, a2, b2;
    double a, b, R, P;
    //puts("输入两个复数的模长和幅角:")
    scanf("%lf%lf%lf%lf", &a1, &b1, &a2, &b2);
    R = a1 * a2, P = b1 + b2;
    a = R * cos(P);
    b = R * sin(P);
    if (a + 0.005 >= 0 && a < 0)
        printf("0.00");
    else
        printf("%.2f", a);
    if(b >= 0)
        printf("+%.2fi", b);
    else if (b + 0.005 >= 0 && b < 0)
        printf("+0.00i");
    else
        printf("%.2fi", b);
    return 0;
}
```

## 总结

与前面的1049类似存在计算和判断的精度问题。
另外在使用gcc编译器进行编译的时候，由于代码中用到了math.h这个头文件，在gcc命令的最后要加上```-lm```参数否则会报未定义的错误。
